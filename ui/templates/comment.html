<div class="comment-box" x-data="{ showReplies: false }">
    <p><strong>{{.Author}}</strong>: {{.Text}}</p>

    <button x-show="{{len .Replies}} > 0" @click="showReplies = !showReplies">
        <span x-text="showReplies ? 'Hide Replies' : 'Show Replies'"></span>
    </button>

    <div x-show="showReplies" class="reply-box">
        {{range .Replies}}
        <!-- Render replies directly instead of separate HTMX requests -->
        <div class="comment-box">
            <p><strong>{{.Author}}</strong>: {{.Text}}</p>

            <button x-show="{{len .Replies}} > 0" @click="showReplies = !showReplies">
                <span x-text="showReplies ? 'Hide Replies' : 'Show Replies'"></span>
            </button>

            <div x-show="showReplies" class="reply-box">
                <!-- HTMX only loads replies for deeper nesting when expanded -->

            </div>
        </div>
        {{end}}
    </div>
</div>