{{ template "basetop" . }}

<div x-data="settingsForm()" class="max-w-4xl mx-auto">
    <h1 class="text-2xl font-bold mb-6">Settings</h1>

    <form class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <!-- Basic Config -->
        <div>
            <h2 class="font-bold mb-2">General</h2>
            <div class="flex flex-col gap-2">
                <label>Command</label>
                <input type="text" x-model="config.command" class="input">
                <label>Mode</label>
                <input type="text" x-model="config.mode" class="input">
                <label>ISD-AS</label>
                <input type="text" x-model="config.isdAs" class="input">
            </div>
        </div>

        <!-- UI -->
        <div>
            <h2 class="font-bold mb-2">UI</h2>
            <div class="flex flex-col gap-2">
                <label>UI Server</label>
                <input type="text" x-model="config.ui.server" class="input">
            </div>
        </div>

        <!-- API -->
        <div>
            <h2 class="font-bold mb-2">API</h2>
            <div class="flex flex-col gap-2">
                <label>API Address</label>
                <input type="text" x-model="config.api.address" class="input">
                <label>Users</label>
                <input type="text" @keydown.enter.prevent="addToList('api.users', $event.target.value)"
                    placeholder="Add user">
                <ul>
                    <template x-for="user in config.api.users" :key="user">
                        <li x-text="user" class="text-sm text-gray-500"></li>
                    </template>
                </ul>
            </div>
        </div>

        <!-- Bootstrap -->
        <div>
            <h2 class="font-bold mb-2">Bootstrap</h2>
            <div class="flex flex-col gap-2">
                <label>Bootstrap Server</label>
                <input type="text" x-model="config.bootstrap.server" class="input">
                <label>Allowed Subnets</label>
                <input type="text" @keydown.enter.prevent="addToList('bootstrap.allowedSubnets', $event.target.value)"
                    placeholder="Add subnet">
                <ul>
                    <template x-for="subnet in config.bootstrap.allowedSubnets" :key="subnet">
                        <li x-text="subnet" class="text-sm text-gray-500"></li>
                    </template>
                </ul>
                <label>Allow Client Fail</label>
                <input type="checkbox" x-model="config.bootstrap.allowClientFail">
            </div>
        </div>

        <!-- CA -->
        <div>
            <h2 class="font-bold mb-2">CA</h2>
            <div class="flex flex-col gap-2">
                <label>CA Server</label>
                <input type="text" x-model="config.ca.server" class="input">
                <label>Cert Validity Hours</label>
                <input type="number" x-model="config.ca.certValidityHours" class="input">
                <label>Clients</label>
                <input type="text" @keydown.enter.prevent="addToList('ca.clients', $event.target.value)"
                    placeholder="Add client">
                <ul>
                    <template x-for="client in config.ca.clients" :key="client">
                        <li x-text="client" class="text-sm text-gray-500"></li>
                    </template>
                </ul>
            </div>
        </div>

        <!-- Metrics -->
        <div>
            <h2 class="font-bold mb-2">Metrics</h2>
            <div class="flex flex-col gap-2">
                <label>Metrics Server</label>
                <input type="text" x-model="config.metrics.server" class="input">
                <label>Prometheus</label>
                <input type="text" x-model="config.metrics.prometheus" class="input">
            </div>
        </div>

        <!-- Service Config -->
        <div class="md:col-span-2">
            <h2 class="font-bold mb-2">Service Config</h2>
            <div class="grid grid-cols-2 gap-4">
                <label><input type="checkbox" x-model="config.serviceConfig.disableDaemon"> Disable Daemon</label>
                <label><input type="checkbox" x-model="config.serviceConfig.disableDispatcher"> Disable
                    Dispatcher</label>
                <label><input type="checkbox" x-model="config.serviceConfig.disableBootstrapServer"> Disable Bootstrap
                    Server</label>
                <label><input type="checkbox" x-model="config.serviceConfig.disablePilaServer"> Disable Pila
                    Server</label>
                <label><input type="checkbox" x-model="config.serviceConfig.disableCertRenewal"> Disable Cert
                    Renewal</label>
            </div>
        </div>

        <!-- Save Button -->
        <div class="md:col-span-2 text-right">
            <button type="submit" class="bg-primary text-on-primary px-4 py-2 rounded-radius hover:opacity-75">Save
                Settings</button>
        </div>

    </form>
</div>



{{ template "basebottom" . }}